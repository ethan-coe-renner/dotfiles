[[ -d $HOME/.cargo ]] && source $HOME/.cargo/env

source $HOME/.env
source $HOME/.aliases

# Don't continue if connected to tramp
[[ $TERM == "tramp" ]] && unsetopt zle && PS1='$ ' && return
export TERM="xterm"

export ZELLIJ_AUTO_ATTACH="true"
export ZELLIJ_AUTO_EXIT="true"

# Force nushell to check ~/.config
export XDG_CONFIG_HOME="$HOME/.config"

if [[ $OSTYPE == *"darwin"* ]]; then
   # Don't run zellij on macos
   export ZELLIJ=1
fi

if [[ -z "$ZELLIJ" ]]; then
    if [[ "$ZELLIJ_AUTO_ATTACH" == "true" ]]; then
        zellij attach -c
    else
        zellij
    fi

    if [[ "$ZELLIJ_AUTO_EXIT" == "true" ]]; then
        exit
    fi
fi

nu
